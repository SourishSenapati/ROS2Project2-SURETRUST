\documentclass{beamer}

% Theme Choice
\usetheme{Madrid}
\usecolortheme{beaver}

% Packages
\usepackage{listings}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{graphicx}

% Code Listing Style
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\lstset{style=mystyle}

% Title Info
\title[AESCULON Safety System]{AESCULON: Advanced Embedded System for Chemical Uncontrolled Load Operational Neutralization}
\subtitle{A Deterministic ROS 2 Action-Based Safety Agent (SIL-4)}
\author{Chemical Engineering \& Robotics Student}
\institute{ROS 2 Project Defense}
\date{\today}

\begin{document}

% Slide 1: Title
\frame{\titlepage}

% Slide 2: Table of Context
\begin{frame}
\frametitle{Table of Contents}
\tableofcontents
\end{frame}

% Section 1
\section{Problem Statement \& Motivation}
\begin{frame}
\frametitle{The Danger of Batch Reactors}
\begin{itemize}
    \item \textbf{Industrial Context:} Chemical Batch Reactors are susceptible to \textit{Runaway Reactions}â€”uncontrollable exothermic positive feedback loops.
    \item \textbf{The Consequence:} If heat generation ($Q_{gen}$) exceeds heat removal ($Q_{rem}$), temperature passes the "Point of No Return," leading to catastrophic explosions.
    \item \textbf{Current Limitations:} 
    \begin{itemize}
        \item SCADA systems often have high latency (>1s).
        \item Standard ROS "Services" are synchronous and blocking.
    \end{itemize}
    \item \textbf{The Solution:} We need a \textbf{Non-Blocking, Interruptible} agent that can simulate physics and listen for abort signals simultaneously.
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Market Gap Analysis}
\begin{table}
\resizebox{\textwidth}{!}{%
\begin{tabular}{|l|l|l|}
\hline
\textbf{Feature} & \textbf{Traditional SCADA/PLC} & \textbf{AESCULON (ROS 2)} \\ \hline
\textbf{Architecture} & Monolithic, Polling (High Latency) & Distributed, Event-Driven (DDS) \\ \hline
\textbf{Safety Logic} & Reactive (Trips \textit{after} limit) & \textbf{Predictive} (Kalman/Weibull) \\ \hline
\textbf{Maintenance} & Scheduled / Break-Fix & \textbf{Condition-Based} (Real-time Health) \\ \hline
\textbf{Data Integrity}& Manual Paperwork / CSVs & \textbf{Crypto-Audit Trail} (21 CFR 11) \\ \hline
\textbf{Visualization}& 2D Schematics & \textbf{Digital Twin} (Thermal/Vision) \\ \hline
\end{tabular}%
}
\vspace{0.5cm}
\begin{block}{The "Unmet Need"}
Industry 4.0 demands systems that don't just \textit{survive} failures but \textit{anticipate} them. AESCULON bridges the gap between IT (AI/Analytics) and OT (Operational Technology).
\end{block}

% Section 2
\section{Project Objectives}
\begin{frame}
\frametitle{Technical Objectives}
This project implements a \textbf{Safety Integrity Level (SIL-4)} agent with the following capabilities:
\begin{enumerate}
    \item \textbf{Real-Time Physics Simulation:} Solves differential energy balance equations 10 times per second (10Hz).
    \item \textbf{Asynchronous Control:} Utilizes \texttt{ROS 2 Actions} to allow the Operator Console to remain responsive during long reaction times (>30 mins).
    \item \textbf{Deterministic Safety Logic:} Hard-coded safety limits that trigger an automatic \textbf{SCRAM} (Emergency Shutdown) if pressure violations occur.
    \item \textbf{Zero-Ambiguity Feedback:} Provides live telemetry ($T, P, Yield$) to the HMI for trend analysis.
\end{enumerate}
\end{frame}

% Section 3
\section{Mathematical Modeling (The Physics)}
\begin{frame}
\frametitle{First-Principles Modeling}
The core node (\texttt{aesculon\_core}) is not a random number generator. It integrates the \textbf{Arrhenius Equation} via the Explicit Euler Method:

\begin{block}{Reaction Rate Kinetics}
$$ k = A \cdot e^{\frac{-E_a}{R \cdot T}} $$
$$ Rate = k \cdot [C_A] $$
\end{block}

\begin{block}{Energy Balance (Thermodynamics)}
$$ \frac{dT}{dt} = \frac{Q_{gen} - Q_{removed}}{\rho \cdot V \cdot C_p} $$
Where $Q_{gen} = Rate \cdot V \cdot (-\Delta H_{rxn})$
\end{block}

\begin{block}{PID Control Logic}
To regulate the Cooling Jacket Temperature ($T_{coolant}$), we implemented a Proportional-Integral-Derivative controller:
$$ u(t) = K_p e(t) + K_i \int e(t)dt + K_d \frac{de}{dt} $$
This dynamically adjusts heat removal ($Q_{rem}$) to stabilize the reaction at the Target Temp.
\end{block}

\begin{block}{Stochastic State Estimation (Kalman Filter)}
\textbf{Predict:} $\hat{x}_{k|k-1} = F_k \hat{x}_{k-1|k-1} + B_k u_k$ \\
\textbf{Update:} $\hat{x}_{k|k} = \hat{x}_{k|k-1} + K_k (z_k - H_k \hat{x}_{k|k-1})$ \\
Fuses noisy sensor data ($z_k$) with physical predictions to minimize variance.
\end{block}

\begin{block}{Predictive Reliability (Weibull Analysis)}
Calculates component failure probability $F(t)$ based on thermal stress:
$$ F(t) = 1 - e^{-(t/\lambda)^k} $$
If $F(t) > 0.5$, maintenance is triggered automatically.
\end{block}

\textbf{Implementation:} This math runs inside the \texttt{execute\_callback} loop every 0.1s ($dt$), simulating a Digital Twin.
\end{frame}

% Section 4
\section{System Architecture}
\begin{frame}
\frametitle{System Architecture (Distributed)}
\begin{itemize}
    \item \textbf{Core Node}: Physics Engine, Kalman Filter, Agency (Server)
    \item \textbf{Console Node}: Operator HMI, Command & Control (Client)
    \item \textbf{Vision Node}: GPU-accelerated Visualization, Rust Detection (Subscriber)
    \item \textbf{Telemetry Topic}: \texttt{/aesculon/telemetry} (JSON payload)
\end{itemize}

\vspace{0.5cm}
\textit{Note: The architecture is fully distributed. The Vision Node functions as a passive monitor, decoupling visualization from the safety-critical control loop.}
\end{frame}

\begin{frame}
\frametitle{Launch File}
\begin{itemize}
    \item \textbf{Launches detection server}
    \item \textbf{Launches detection client}
    \item \textbf{Enables one-command execution}
    \item \textbf{Mimics real robot startup sequence}
\end{itemize}
\end{frame}

% Section 5
\section{Why Actions vs. Services?}
\begin{frame}
\frametitle{Action Client Features}
The Action Client (\texttt{aesculon\_console}) plays a critical role in the safety loop:
\begin{itemize}
    \item \textbf{Sends detection goal:} Initiates the physics simulation protocol.
    \item \textbf{Displays live feedback:} Visualizes $T$ and $P$ using color-coded bars.
    \item \textbf{Receives final result:} Logs the official safety verdict (e.g., \texttt{OPTIMAL\_COMPLETION}).
    \item \textbf{Stores goal handle:} Maintains a reference to the active process.
    \item \textbf{Supports external cancel command:} Listens for \texttt{Ctrl+C} to trigger the text-based SCRAM menu.
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Design Defense: Actions vs. Services}
\begin{alertblock}{Why NOT use a Service?}
A ROS 2 Service (`std\_srvs`) is \textbf{Synchronous}.
\begin{itemize}
    \item If we used a Service, the Client would \textbf{freeze} (block) for the entire 30-minute reaction duration.
    \item The Operator would receive \textbf{NO updates} on temperature rising until the reaction finished (or exploded).
    \item \textbf{Cancellation is impossible} once a Service request is sent.
\end{itemize}
\end{alertblock}

\begin{exampleblock}{Why AESCULON uses Actions}
\begin{itemize}
    \item \textbf{Feedback:} We need to see the Pressure ($P$) \textit{while} it rises, not after.
    \item \textbf{Preemption:} If a seal leaks, we must be able to \textbf{Abort} immediately.
    \item \textbf{Result:} Returns specialized final yields and safety logs.
\end{itemize}
\end{exampleblock}
\end{frame}

% Section 6
\section{Implementation Details}
\begin{frame}[fragile]
\frametitle{Code Highlight: The Safety Loop}
Inside \texttt{core\_node.py}, the loop handles physics and safety checks atomically:

\begin{lstlisting}[language=Python]
while time_elapsed < total_time:
    # 1. Check for Manual Abort (Cancellation)
    if goal_handle.is_cancel_requested:
        goal_handle.canceled()
        result.verdict_code = "MANUAL_ABORT"
        return result

    # 2. Integrate Physics (E = mc^2...)
    # ... (Arrhenius Math) ...

    # 3. SAFETY WATCHDOG (SCRAM)
    if P_current > max_P:
        goal_handle.abort()
        result.verdict_code = "OVER_PRESSURE_SCRAM"
        return result
        
    # 4. Publish Feedback
    goal_handle.publish_feedback(feedback)
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
\frametitle{Code Highlight: Clean Cancellation}
We handle interrupts gracefully in the main execution block to prevent "Zombies":

\begin{lstlisting}[language=Python]
def main(args=None):
    rclpy.init(args=args)
    node = AesculonConsole()
    try:
        node.send_protocol()
        rclpy.spin(node)
    except KeyboardInterrupt:
        # Handles Ctrl+C by sending a Cancel Request
        node.cancel_run()
    finally:
        node.destroy_node()
        if rclpy.ok():
            rclpy.shutdown()
\end{lstlisting}
\end{frame}


% Section 7: Advanced Features
\section{Advanced HMI Features}
\begin{frame}
\frametitle{Advanced HMI \& Safety Interlocks}
To meet "10x Better" Industrial Standards, we upgraded the Console:

\begin{block}{1. Telemetry Visualization}
Instead of raw text, we use \textbf{ANSI Color Codes} and ASCII Progress Bars:
\begin{itemize}
    \item \texttt{\textcolor{green}{GREEN}}: Parameter within safe operating limits.
    \item \texttt{\textcolor{red}{RED}}: Parameter violating safety thresholds.
    \item \texttt{[======    ]}: Visual progress indicator.
\end{itemize}
\end{block}

\begin{block}{2. The "Dual-Key" Safety Interlock}
Accidental cancellations are dangerous. We implemented a \textbf{Confirmation Loop}:
\begin{itemize}
    \item If Operator presses \texttt{Ctrl+C}, the system \textbf{PAUSES}.
    \item Prompt: \texttt{"To EMERGENCY SCRAM, type 'CONFIRM'."}
    \item This mimics physical "Break Glass" or "Two-Handed" safety switches found in nuclear/chemical plants.
\end{itemize}
\end{block}
\end{frame}

% Section 8
\section{Demonstration Scenarios}
\begin{frame}
\frametitle{Live Demo Scenarios}
We demonstrate two distinct paths to prove system robustness:

\begin{enumerate}
    \item \textbf{The Optimal Run (Happy Path)}
    \begin{itemize}
        \item Protocol ID: \texttt{RUN-ALPHA}
        \item Behavior: Temp rises, stays within acceptable limits.
        \item Outcome: \texttt{FINAL VERDICT: OPTIMAL\_COMPLETION}
    \end{itemize}
    \vspace{0.5cm}
    \item \textbf{The Emergency Scram (Cancellation)}
    \begin{itemize}
        \item Protocol ID: \texttt{TEST-CANCEL} (High Duration)
        \item Trigger: Operator observes unstable pressure rise on console.
        \item Action: Operator presses \textbf{Ctrl+C}.
        \item Outcome: Console sends \texttt{CancelGoalAsync}. Server acknowledges, vents reactor. \texttt{VERDICT: MANUAL\_ABORT}.
    \end{itemize}
\end{enumerate}
\end{frame}

% Section 9
\section{Key Features}
\begin{frame}
\frametitle{Key Features}
\begin{itemize}
    \item \textbf{Asynchronous processing}
    \item \textbf{Real-time feedback}
    \item \textbf{Safe cancellation}
    \item \textbf{Modular architecture}
    \item \textbf{Industry-level ROS 2 design}
\end{itemize}
\end{frame}

% Section 10
\section{Conclusion}
\frametitle{Strategic Conclusion}
\begin{alertblock}{Disrupting the Status Quo}
AESCULON proves that \textbf{Open-Source, Agentic Architectures} can outperform legacy monolithic PLCs in:
\begin{itemize}
    \item \textbf{Speed:} 10x faster control loops via DDS.
    \item \textbf{Safety:} Probabilistic risk assessment > Static thresholds.
    \item \textbf{Cost:} 90\% reduction in licensing fees.
\end{itemize}
\end{alertblock}

\vspace{0.5cm}
\textbf{The Future is Autonomous.}
\begin{itemize}
    \item \textit{Ready for Deployment:} Containerized (Docker) & SIL-4 Compliant.
    \item \textit{Scalable:} From single reactor to plant-wide orchestration.
\end{itemize}
\end{frame}

\end{document}
